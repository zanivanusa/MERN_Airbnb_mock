{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u017Dan\\\\Desktop\\\\sp_v4_sample\\\\frontend\\\\src\\\\components\\\\DetailedPhoto.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DetailedPhoto(_ref) {\n  _s();\n  let {\n    photo,\n    updateSelectedPhoto\n  } = _ref;\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState('');\n  const handleVote = async () => {\n    try {\n      const res = await fetch(`http://localhost:3001/photos/${photo._id}/vote`, {\n        method: 'POST'\n      });\n      if (res.ok) {\n        const updatedPhoto = {\n          ...photo,\n          likes: photo.likes + 1\n        };\n        updateSelectedPhoto(updatedPhoto);\n      } else {\n        console.log('Failed to vote');\n      }\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  };\n  useEffect(() => {\n    // Fetch comments for the selected photo\n    const fetchComments = async () => {\n      try {\n        const res = await fetch(`http://localhost:3001/photos/${photo._id}/comments`);\n        const data = await res.json();\n        setComments(data);\n      } catch (error) {\n        console.log('Error:', error);\n      }\n    };\n    fetchComments();\n  }, [photo]);\n  const handleSubmitComment = async e => {\n    e.preventDefault();\n    try {\n      // Send the new comment to the backend API\n      const res = await fetch(`http://localhost:3001/photos/${photo._id}/comments`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          comment: newComment\n        })\n      });\n      if (res.ok) {\n        // Clear the comment input field and fetch the updated comments\n        setNewComment('');\n        fetchComments();\n      } else {\n        console.log('Failed to submit comment');\n      }\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: photo.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: photo.imageUrl,\n      alt: photo.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Posted by: \", photo.user]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Likes: \", photo.likes]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleVote,\n      children: \"Vote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Comments:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: comments.map(comment => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: comment.text\n      }, comment._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmitComment,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newComment,\n        onChange: e => setNewComment(e.target.value),\n        placeholder: \"Add a comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(DetailedPhoto, \"MxCDS9ewhkO9e8lz5YjyzEXdntQ=\");\n_c = DetailedPhoto;\nexport default DetailedPhoto;\nvar _c;\n$RefreshReg$(_c, \"DetailedPhoto\");","map":{"version":3,"names":["useState","useEffect","jsxDEV","_jsxDEV","DetailedPhoto","_ref","_s","photo","updateSelectedPhoto","comments","setComments","newComment","setNewComment","handleVote","res","fetch","_id","method","ok","updatedPhoto","likes","console","log","error","fetchComments","data","json","handleSubmitComment","e","preventDefault","headers","body","JSON","stringify","comment","children","title","fileName","_jsxFileName","lineNumber","columnNumber","src","imageUrl","alt","user","onClick","map","text","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/Å½an/Desktop/sp_v4_sample/frontend/src/components/DetailedPhoto.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nfunction DetailedPhoto({ photo, updateSelectedPhoto }) {\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n\r\n  const handleVote = async () => {\r\n    try {\r\n      const res = await fetch(`http://localhost:3001/photos/${photo._id}/vote`, {\r\n        method: 'POST',\r\n      });\r\n\r\n      if (res.ok) {\r\n        const updatedPhoto = { ...photo, likes: photo.likes + 1 };\r\n        updateSelectedPhoto(updatedPhoto);\r\n      } else {\r\n        console.log('Failed to vote');\r\n      }\r\n    } catch (error) {\r\n      console.log('Error:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Fetch comments for the selected photo\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:3001/photos/${photo._id}/comments`);\r\n        const data = await res.json();\r\n        setComments(data);\r\n      } catch (error) {\r\n        console.log('Error:', error);\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [photo]);\r\n\r\n  const handleSubmitComment = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      // Send the new comment to the backend API\r\n      const res = await fetch(`http://localhost:3001/photos/${photo._id}/comments`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ comment: newComment }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        // Clear the comment input field and fetch the updated comments\r\n        setNewComment('');\r\n        fetchComments();\r\n      } else {\r\n        console.log('Failed to submit comment');\r\n      }\r\n    } catch (error) {\r\n      console.log('Error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{photo.title}</h2>\r\n      <img src={photo.imageUrl} alt={photo.title} />\r\n      <p>Posted by: {photo.user}</p>\r\n      <p>Likes: {photo.likes}</p>\r\n      <button onClick={handleVote}>Vote</button>\r\n      <h4>Comments:</h4>\r\n      <ul>\r\n        {comments.map((comment) => (\r\n          <li key={comment._id}>{comment.text}</li>\r\n        ))}\r\n      </ul>\r\n      <form onSubmit={handleSubmitComment}>\r\n        <input\r\n          type=\"text\"\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n          placeholder=\"Add a comment\"\r\n        />\r\n        <button type=\"submit\">Submit Comment</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DetailedPhoto;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}